<h1>Edit your report</h1>


<%= simple_form_for [current_user, @report] do |f| %>
<%= f.input :name, label: "Name of the new report", error: 'Project name is mandatory, please specify one' %>
<%= link_to "Add a text block |", new_user_report_text_block_path(current_user, @report) %>
<%= link_to "Add a kpi block |", new_user_report_kpi_block_path(current_user, @report) %>
<%= link_to "Add a graph block", new_user_report_graph_block_path(current_user, @report) %>
<%= f.button :submit %>
<% end %>

<div>
  <% @report.text_blocks.each do |report| %>
  <%= link_to report.content, user_report_text_block_path(current_user, report) %>
  <%= link_to "| Edit | ", edit_user_report_text_block_path(current_user, report) %>
  <%= link_to "Delete ||", user_report_text_block_path(current_user, report), method: :delete %>
  <% end %>
</div>

<div>
  <% @report.kpi_blocks.each do |report| %>
  <%= link_to report.kpi_type, user_report_kpi_block_path(current_user, report) %>
  <%= report.end_date %>
  <%= report.start_date %>
  <%= report.order %>
  <%= link_to "| Edit | ", edit_user_report_kpi_block_path(current_user, report) %>
  <%= link_to "Delete ||", user_report_kpi_block_path(current_user, report), method: :delete %>
  <% end %>
</div>

<div>
  <% @report.graph_blocks.each do |report| %>
  <%= link_to report.graph_type, user_report_graph_block_path(current_user, report)%>
  <%= report.end_date %>
  <%= report.start_date %>
  <%= report.order %>
  <%= link_to "| Edit | ", edit_user_report_graph_block_path(current_user, report) %>
  <%= link_to "Delete ||", user_report_graph_block_path(current_user, report), method: :delete %>
  <% end %>
</div>

<%= link_to "Delete this report |", user_report_path(current_user, @report), method: :delete %>

<%= link_to "Back to overview", user_reports_path(current_user) %>

